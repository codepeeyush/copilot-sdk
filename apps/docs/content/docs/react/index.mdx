---
title: React Hooks
description: All the hooks you need to build custom AI interfaces
---

import { Callout } from 'fumadocs-ui/components/callout';
import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { Cards, Card } from 'fumadocs-ui/components/card';

# React Hooks

Everything is a hook. No magic, no black boxes.

---

## Hook Overview

<Cards>
  <Card title="useAIChat" icon="ðŸ’¬">
    Main chat hook - messages, loading state, send/stop
  </Card>
  <Card title="useToolWithSchema" icon="ðŸ”§">
    Define tools with Zod schemas for type-safe AI actions
  </Card>
  <Card title="useAIContext" icon="ðŸ“‹">
    Provide app context that AI sees with every message
  </Card>
  <Card title="useYourGPTContext" icon="âš™ï¸">
    Access full internal SDK state for advanced use cases
  </Card>
</Cards>

---

## useAIChat

The main hook. Gives you messages, loading state, and the ability to send.

```tsx
import { useAIChat } from '@yourgpt/copilot-sdk-react';

function MyChat() {
  const {
    messages,        // Message[]
    isLoading,       // boolean
    error,           // Error | null
    sendMessage,     // (content: string) => Promise<void>
    stopGeneration,  // () => void
    clearMessages,   // () => void
    regenerate,      // () => Promise<void>
  } = useAIChat();

  return (
    <div>
      {messages.map(msg => (
        <div key={msg.id}>
          <strong>{msg.role}:</strong> {msg.content}
        </div>
      ))}
      <button onClick={() => sendMessage('Hello!')}>Send</button>
    </div>
  );
}
```

### Message Shape

```ts
interface Message {
  id: string;
  role: 'user' | 'assistant' | 'system' | 'tool';
  content: string;
  sources?: Source[];      // Knowledge base citations
  toolCalls?: ToolCall[];  // Tools the AI called
  createdAt: Date;
}
```

---

## useToolWithSchema

Define a tool with Zod validation. This is where the magic happens.

```tsx
import { useToolWithSchema } from '@yourgpt/copilot-sdk-react';
import { z } from 'zod';

function WeatherTool() {
  useToolWithSchema({
    name: 'get_weather',
    description: 'Get current weather for a city',
    schema: z.object({
      city: z.string().describe('City name'),
      units: z.enum(['celsius', 'fahrenheit']).optional(),
    }),
    handler: async ({ city, units }) => {
      const data = await fetchWeather(city, units);
      return {
        success: true,
        temperature: data.temp,
        conditions: data.conditions,
      };
    },
  });

  return null;
}
```

<Callout type="info">
**The handler return value is what the AI sees.** Make it informative!
</Callout>

### useToolsWithSchema

Register multiple tools at once:

```tsx
import { useToolsWithSchema } from '@yourgpt/copilot-sdk-react';
import { z } from 'zod';

function MyTools() {
  useToolsWithSchema([
    {
      name: 'search_products',
      description: 'Search for products',
      schema: z.object({ query: z.string() }),
      handler: async ({ query }) => {
        const results = await searchProducts(query);
        return { success: true, products: results };
      },
    },
    {
      name: 'add_to_cart',
      description: 'Add item to cart',
      schema: z.object({ productId: z.string(), quantity: z.number() }),
      handler: async ({ productId, quantity }) => {
        await addToCart(productId, quantity);
        return { success: true, message: 'Added to cart' };
      },
    },
  ]);

  return null;
}
```

---

## useTool / useTools

Register tools without Zod schemas (simpler but less type-safe):

```tsx
import { useTool } from '@yourgpt/copilot-sdk-react';

function NavigationTool() {
  useTool({
    name: 'navigate',
    description: 'Navigate to a page',
    inputSchema: {
      type: 'object',
      properties: {
        path: { type: 'string', description: 'URL path' },
      },
      required: ['path'],
    },
    handler: async ({ path }) => {
      window.location.href = path;
      return { success: true };
    },
  });

  return null;
}
```

---

## useAIContext

Give the AI context about your app state. The AI gets this with every message.

```tsx
import { useAIContext } from '@yourgpt/copilot-sdk-react';

function ProductPage({ product }) {
  useAIContext({
    key: 'current-product',
    data: {
      id: product.id,
      name: product.name,
      price: product.price,
      inStock: product.inventory > 0,
    },
    description: 'The product the user is currently viewing',
  });

  return <ProductView product={product} />;
}
```

Now when user asks "is this in stock?", the AI knows which product they mean.

### useAIContexts

Register multiple contexts at once:

```tsx
import { useAIContexts } from '@yourgpt/copilot-sdk-react';

function AppContext() {
  useAIContexts([
    {
      key: 'user',
      data: { name: user.name, plan: user.subscription },
      description: 'Current user info',
    },
    {
      key: 'cart',
      data: { itemCount: cart.items.length, total: cart.total },
      description: 'Shopping cart state',
    },
  ]);

  return null;
}
```

---

## useAIAction

Register an action without a schema. Simpler but less type-safe.

```tsx
import { useAIAction } from '@yourgpt/copilot-sdk-react';

function NavigationActions() {
  const navigate = useNavigate();

  useAIAction({
    name: 'go_to_page',
    description: 'Navigate to a page',
    parameters: {
      page: {
        type: 'string',
        description: 'Page name: home, products, cart, checkout',
        required: true,
      },
    },
    handler: async ({ page }) => {
      navigate(`/${page}`);
      return { success: true, navigatedTo: page };
    },
  });

  return null;
}
```

---

## useToolExecutor

Track and manage tool executions in the agentic loop:

```tsx
import { useToolExecutor } from '@yourgpt/copilot-sdk-react';

function ToolStatus() {
  const {
    executions,       // ToolExecution[] - all tool executions
    pendingCount,     // number - tools waiting for approval
    runningCount,     // number - currently executing
    completedCount,   // number - finished
    approve,          // (executionId: string) => void
    reject,           // (executionId: string) => void
  } = useToolExecutor();

  return (
    <div>
      {executions.map(exec => (
        <div key={exec.id}>
          {exec.toolName}: {exec.status}
          {exec.status === 'pending_approval' && (
            <>
              <button onClick={() => approve(exec.id)}>Approve</button>
              <button onClick={() => reject(exec.id)}>Reject</button>
            </>
          )}
        </div>
      ))}
    </div>
  );
}
```

---

## useAgent

Full control over the agentic loop:

```tsx
import { useAgent } from '@yourgpt/copilot-sdk-react';

function AgentController() {
  const {
    isRunning,        // boolean - is agent loop active
    currentIteration, // number - current loop iteration
    maxIterations,    // number - max allowed iterations
    stop,             // () => void - stop the loop
  } = useAgent();

  return (
    <div>
      {isRunning && (
        <>
          <span>Iteration {currentIteration}/{maxIterations}</span>
          <button onClick={stop}>Stop Agent</button>
        </>
      )}
    </div>
  );
}
```

---

## useThreads

Manage multiple conversation threads:

```tsx
import { useThreads } from '@yourgpt/copilot-sdk-react';

function ThreadSidebar() {
  const {
    threads,          // Thread[] - all threads
    currentThread,    // Thread | null - active thread
    createThread,     // () => Thread - create new
    switchThread,     // (threadId: string) => void
    deleteThread,     // (threadId: string) => void
    updateThread,     // (threadId: string, data: Partial<Thread>) => void
  } = useThreads();

  return (
    <div>
      <button onClick={createThread}>New Chat</button>
      {threads.map(thread => (
        <div
          key={thread.id}
          onClick={() => switchThread(thread.id)}
          className={thread.id === currentThread?.id ? 'active' : ''}
        >
          {thread.title || 'New conversation'}
        </div>
      ))}
    </div>
  );
}
```

---

## useDevLogger

Debug the AI conversation flow. See exactly what's happening.

```tsx
import { useDevLogger } from '@yourgpt/copilot-sdk-react';
import { DevLogger } from '@yourgpt/copilot-sdk-ui';

function DebugPanel() {
  const loggerState = useDevLogger();

  return <DevLogger state={loggerState} position="bottom-left" />;
}
```

Shows: messages, tool calls, context, timing.

---

## useSuggestions

Generate smart suggestions based on context.

```tsx
import { useSuggestions } from '@yourgpt/copilot-sdk-react';

function SuggestionChips() {
  const { suggestions, isLoading, generate } = useSuggestions({
    count: 4,
    style: 'conversational',
  });

  return (
    <div className="flex gap-2">
      {suggestions.map((s, i) => (
        <button key={i} onClick={() => sendMessage(s)}>
          {s}
        </button>
      ))}
    </div>
  );
}
```

---

## useAITools

Manage smart context tools (screenshot, console, network):

```tsx
import { useAITools } from '@yourgpt/copilot-sdk-react';

function ContextTools() {
  const {
    isEnabled,           // boolean - are tools enabled
    pendingConsent,      // ToolConsentRequest | null
    capturedContext,     // CapturedContext | null
    requestConsent,      // (toolType: ToolType) => void
    approveConsent,      // () => void
    rejectConsent,       // () => void
    captureScreenshot,   // () => Promise<string>
    captureConsole,      // () => Promise<ConsoleLogEntry[]>
    captureNetwork,      // () => Promise<NetworkRequestEntry[]>
  } = useAITools();

  return (
    <div>
      {pendingConsent && (
        <div>
          Allow {pendingConsent.toolType}?
          <button onClick={approveConsent}>Yes</button>
          <button onClick={rejectConsent}>No</button>
        </div>
      )}
    </div>
  );
}
```

---

## useKnowledgeBase

Search a knowledge base and inject results into AI context.

```tsx
import { useKnowledgeBase } from '@yourgpt/copilot-sdk-react';

function HelpChat() {
  useKnowledgeBase({
    projectUid: 'your-project-id',
    token: 'your-api-token',
    limit: 5,
  });

  // That's it! Knowledge base is now searched automatically
  // when users ask questions.
}
```

---

## useYourGPTContext

Access the full internal state. For advanced use cases.

```tsx
import { useYourGPTContext } from '@yourgpt/copilot-sdk-react';

function AdvancedDebug() {
  const {
    chat,     // messages, isLoading, error
    tools,    // registered tools, pending confirmations
    agent,    // agentic loop state
    config,   // provider config
  } = useYourGPTContext();

  return (
    <pre>{JSON.stringify({ chat, tools }, null, 2)}</pre>
  );
}
```

---

## useThreadsContext

Access thread management context directly:

```tsx
import { useThreadsContext } from '@yourgpt/copilot-sdk-react';

function ThreadInfo() {
  const {
    threads,
    currentThreadId,
    isLoading,
  } = useThreadsContext();

  return <span>{threads.length} conversations</span>;
}
```

---

## useIsPremium

Check if a premium API key is configured:

```tsx
import { useIsPremium } from '@yourgpt/copilot-sdk-react';

function PremiumFeature() {
  const isPremium = useIsPremium();

  if (!isPremium) {
    return <span>Upgrade for this feature</span>;
  }

  return <AdvancedFeature />;
}
```

---

## Permission Storage Utilities

Remember user's tool permissions across sessions:

```tsx
import {
  createPermissionStorage,
  createSessionPermissionCache,
} from '@yourgpt/copilot-sdk-react';

// Persist to localStorage
const storage = createPermissionStorage({
  type: 'localStorage',
  keyPrefix: 'myapp-copilot',
});

// Or session-only cache
const sessionCache = createSessionPermissionCache();

// Use in provider
<YourGPTProvider
  runtimeUrl="/api/chat"
  permissionStorage={storage}
>
  {children}
</YourGPTProvider>
```

---

## Hook Composition

Hooks compose naturally. Build complex flows:

```tsx
function SmartCopilot() {
  // Chat state
  const { messages, sendMessage, isLoading } = useAIChat();

  // Context awareness
  useAIContext({
    key: 'user-tier',
    data: { isPremium: user.subscription === 'pro' },
    description: 'User subscription tier',
  });

  // Custom tools
  useToolWithSchema({
    name: 'upgrade_plan',
    description: 'Show upgrade modal',
    schema: z.object({}),
    handler: async () => {
      showUpgradeModal();
      return { success: true, message: 'Showing upgrade options' };
    },
  });

  // Knowledge base
  useKnowledgeBase({ projectUid: 'help-docs', token: apiToken });

  // Thread management
  const { threads, createThread } = useThreads();

  return <ChatUI messages={messages} onSend={sendMessage} />;
}
```

---

## All Exports

```ts
// Provider
export { YourGPTProvider } from '@yourgpt/copilot-sdk-react';

// Context Hooks
export { useYourGPTContext } from '@yourgpt/copilot-sdk-react';
export { useThreadsContext } from '@yourgpt/copilot-sdk-react';

// Chat & Action Hooks
export { useAIChat, useIsPremium } from '@yourgpt/copilot-sdk-react';
export { useAIAction, useAIActions } from '@yourgpt/copilot-sdk-react';
export { useAIContext, useAIContexts } from '@yourgpt/copilot-sdk-react';
export { useAITools, useSuggestions } from '@yourgpt/copilot-sdk-react';

// Tool Hooks (Agentic Loop)
export { useTool, useTools } from '@yourgpt/copilot-sdk-react';
export { useToolWithSchema, useToolsWithSchema } from '@yourgpt/copilot-sdk-react';
export { useToolExecutor } from '@yourgpt/copilot-sdk-react';

// Agent & Thread Hooks
export { useAgent, useThreads } from '@yourgpt/copilot-sdk-react';

// Knowledge Base
export { useKnowledgeBase } from '@yourgpt/copilot-sdk-react';

// Development
export { useDevLogger } from '@yourgpt/copilot-sdk-react';

// Utilities
export { createPermissionStorage, createSessionPermissionCache } from '@yourgpt/copilot-sdk-react';
```
